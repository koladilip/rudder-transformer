/**
 * Auto-migrated and optimized test cases
 * Generated on: 2025-01-31T07:06:55.528Z
 */
import { defaultMockFns } from '../mocks';
import { RouterTestData } from '../../../testTypes';
import {} from '../../../../../src/types';

export const data: RouterTestData[] = [
  {
    id: 'router-1738307215527',
    name: 'zoho',
    description:
      'Checks upsertion with the Zoho Leads module using workflow triggers. Batches two records verifying multi-select handling and duplicate-check fields (Email).',
    scenario:
      'Insert action scenario for Zoho Leads (trigger=workflow) with two messages in a single batch.',
    successCriteria:
      'Both records successfully upserted as one batched request with a 200 response.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                  'multi-language': 'Bengali',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['email', 'Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                        'multi-language': ['Bengali'],
                      },
                    ],
                    $append_values: {
                      'multi-language': 'true',
                      'multi class': 'false',
                    },
                    trigger: ['workflow'],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'router-1738307215528',
    name: 'zoho',
    description:
      'Checks upsertion with the Zoho Leads module where triggers are set to None. Verifies no workflow triggers are included in the request.',
    scenario:
      'Insert action scenario for Zoho Leads (trigger=None) with two messages in a single batch.',
    successCriteria:
      'Both records successfully upserted with an empty trigger array and a 200 response.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                  'multi-language': 'Bengali',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['email', 'Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                        'multi-language': ['Bengali'],
                      },
                    ],
                    $append_values: {
                      'multi-language': 'true',
                      'multi class': 'false',
                    },
                    trigger: [],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'router-1738307215529',
    name: 'zoho',
    description:
      'Checks upsertion to a custom Zoho module (CUSTOM). Ensures mandatory fields are present and multi-select fields are transformed if configured.',
    scenario:
      'Insert action for a custom Zoho module, verifying upsert behavior and handling of multi-select fields.',
    successCriteria:
      'Records successfully batched and upserted to the CUSTOM module endpoint with a 200 response.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-CUSTOM',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                  Name: 'ABC',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'CUSTOM',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-CUSTOM',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                  'multi-language': 'Bengali',
                  Name: 'ABC',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/CUSTOM/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['Email', 'Name'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                        Name: 'ABC',
                      },
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                        'multi-language': ['Bengali'],
                        Name: 'ABC',
                      },
                    ],
                    $append_values: {
                      'multi-language': 'true',
                      'multi class': 'false',
                    },
                    trigger: [],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'CUSTOM',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'router-1738307215530',
    name: 'zoho',
    description:
      'Tests partial success/failure when mandatory fields (Last_Name for Leads) are missing. One event is valid; one lacks Last_Name.',
    scenario:
      'Insert action for Zoho Leads with two records: one complete, one missing mandatory fields.',
    successCriteria:
      'Valid record is successfully upserted with 200; invalid record fails with 400 referencing the missing mandatory field.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  'multi-language': 'Bengali',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                    ],
                    $append_values: {
                      'multi-language': 'true',
                      'multi class': 'false',
                    },
                    trigger: ['workflow'],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
            {
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 400,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: false,
              error: 'Leads object must have the Last_Name property(ies).',
              statTags: {
                errorCategory: 'dataValidation',
                destinationId: 'default-destination',
                workspaceId: 'default-workspace',
                errorType: 'configuration',
                destType: 'ZOHO',
                module: 'destination',
                implementation: 'cdkV2',
                feature: 'router',
              },
            },
          ],
        },
      },
    },
  },
  {
    id: 'router-1738307215531',
    name: 'zoho',
    description:
      'Verifies that if multi-select decisions are not set in RudderStack, all fields are treated as normal fields (no multi-select array transformation).',
    scenario:
      'Insert action for Zoho Leads where multi-select config is absent, ensuring no appended multi-select behavior.',
    successCriteria:
      'Record is successfully upserted with a 200 response, treating all fields as normal fields.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                    ],
                    $append_values: {},
                    trigger: ['workflow'],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'router-1738307215532',
    name: 'zoho',
    description:
      'Checks multi-record batching for Zoho Leads upsertion. Demonstrates how the batch may split if it exceeds the max batch size (2).',
    scenario:
      'Insert action with three records, verifying the first two are batched together and the third is in a separate batch.',
    successCriteria:
      'All records are upserted in the correct batch group(s) with 200 responses for each batch.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'insert',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'Email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'subscribed@eewrfrd.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 3,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                    ],
                    $append_values: {},
                    trigger: ['workflow'],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'POST',
                endpoint: 'https://www.zohoapis.com/crm/v6/Leads/upsert',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {
                    duplicate_check_fields: ['Email'],
                    data: [
                      {
                        Email: 'subscribed@eewrfrd.com',
                        First_Name: 'subcribed',
                        Last_Name: ' User',
                      },
                    ],
                    $append_values: {},
                    trigger: ['workflow'],
                  },
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 3,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'US',
                  module: 'Leads',
                  trigger: 'workflow',
                  addDefaultDuplicateCheck: true,
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'zoho_deletion_1',
    name: 'zoho',
    description:
      'Tests batch deletion of multiple Zoho Leads in a single request with triggers disabled (trigger=None).',
    scenario:
      'Delete action scenario for Zoho Leads, combining multiple leads into one batch request (using record IDs).',
    successCriteria:
      'Both leads are successfully deleted with a 200 response, confirming correct batch deletion handling.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'delete',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'tobedeleted@gmail.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'delete',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'tobedeleted2@gmail.com',
                  First_Name: 'subcribed2',
                  Last_Name: ' User2',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'DELETE',
                endpoint:
                  'https://www.zohoapis.in/crm/v6/Leads?ids=<RECORD_ID_1>,<RECORD_ID_2>&wf_trigger=false',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {},
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
  {
    id: 'zoho_deletion_2',
    name: 'zoho',
    description:
      'Tests a batch deletion where one record exists and another does not. Verifies partial success and an error for non-existent records.',
    scenario:
      'Delete action scenario for Zoho Leads mixing valid and invalid lead IDs in one batch.',
    successCriteria:
      'Existing record is deleted with a 200 response; non-existing record fails with a 400 error indicating no record found.',
    feature: 'router',
    module: 'destination',
    version: 'v0',
    input: {
      request: {
        body: {
          input: [
            {
              message: {
                action: 'delete',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'tobedeleted@gmail.com',
                  First_Name: 'subcribed',
                  Last_Name: ' User',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 1,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
            {
              message: {
                action: 'delete',
                context: {
                  externalId: [
                    {
                      type: 'ZOHO-Leads',
                      identifierType: 'email',
                    },
                  ],
                  mappedToDestination: 'true',
                  sources: {
                    job_run_id: 'cgiiurt8um7k7n5dq480',
                    task_run_id: 'cgiiurt8um7k7n5dq48g',
                    job_id: '2MUWghI7u85n91dd1qzGyswpZan',
                    version: '895/merge',
                  },
                },
                recordId: '2',
                rudderId: '2',
                fields: {
                  Email: 'tobedeleted3@gmail.com',
                  First_Name: 'subcribed3',
                  Last_Name: ' User3',
                },
                type: 'record',
              },
              metadata: {
                sourceId: 'default-source',
                workspaceId: 'default-workspace',
                namespace: 'default-namespace',
                instanceId: 'default-instance',
                sourceType: 'default-source-type',
                sourceCategory: 'default-category',
                trackingPlanId: 'default-tracking-plan',
                trackingPlanVersion: 1,
                sourceTpConfig: {},
                mergedTpConfig: {},
                destinationId: 'default-destination',
                jobRunId: 'default-job-run',
                jobId: 2,
                sourceBatchId: 'default-batch',
                sourceJobId: 'default-source-job',
                sourceJobRunId: 'default-source-job-run',
                sourceTaskId: 'default-task',
                sourceTaskRunId: 'default-task-run',
                recordId: {},
                destinationType: 'default-destination-type',
                messageId: 'default-message-id',
                oauthAccessToken: 'default-token',
                messageIds: ['default-message-id'],
                rudderId: 'default-rudder-id',
                receivedAt: '2025-01-31T07:06:50.197Z',
                eventName: 'default-event',
                eventType: 'default-type',
                sourceDefinitionId: 'default-source-def',
                destinationDefinitionId: 'default-dest-def',
                transformationId: 'default-transform',
                dontBatch: false,
                userId: 'u1',
                secret: {
                  accessToken: 'correct-access-token',
                },
              },
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
            },
          ],
          destType: 'zoho',
        },
        method: 'POST',
      },
    },
    output: {
      response: {
        status: 200,
        body: {
          output: [
            {
              batchedRequest: {
                version: '1',
                type: 'REST',
                method: 'DELETE',
                endpoint: 'https://www.zohoapis.in/crm/v6/Leads?ids=<RECORD_ID_1>&wf_trigger=false',
                headers: {
                  Authorization: 'Zoho-oauthtoken correct-access-token',
                },
                params: {},
                body: {
                  JSON: {},
                  JSON_ARRAY: {},
                  XML: {},
                  FORM: {},
                },
                files: {},
              },
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 1,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 200,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: true,
            },
            {
              metadata: [
                {
                  sourceId: 'default-source',
                  workspaceId: 'default-workspace',
                  namespace: 'default-namespace',
                  instanceId: 'default-instance',
                  sourceType: 'default-source-type',
                  sourceCategory: 'default-category',
                  trackingPlanId: 'default-tracking-plan',
                  trackingPlanVersion: 1,
                  sourceTpConfig: {},
                  mergedTpConfig: {},
                  destinationId: 'default-destination',
                  jobRunId: 'default-job-run',
                  jobId: 2,
                  sourceBatchId: 'default-batch',
                  sourceJobId: 'default-source-job',
                  sourceJobRunId: 'default-source-job-run',
                  sourceTaskId: 'default-task',
                  sourceTaskRunId: 'default-task-run',
                  recordId: {},
                  destinationType: 'default-destination-type',
                  messageId: 'default-message-id',
                  oauthAccessToken: 'default-token',
                  messageIds: ['default-message-id'],
                  rudderId: 'default-rudder-id',
                  receivedAt: '2025-01-31T07:06:50.197Z',
                  eventName: 'default-event',
                  eventType: 'default-type',
                  sourceDefinitionId: 'default-source-def',
                  destinationDefinitionId: 'default-dest-def',
                  transformationId: 'default-transform',
                  dontBatch: false,
                  userId: 'u1',
                  secret: {
                    accessToken: 'correct-access-token',
                  },
                },
              ],
              statusCode: 400,
              destination: {
                ID: '345',
                Name: 'Test',
                DestinationDefinition: {
                  ID: '345',
                  Name: 'Test',
                  DisplayName: 'ZOHO',
                  Config: {
                    cdkV2Enabled: true,
                    excludeKeys: [],
                    includeKeys: [],
                  },
                },
                Config: {
                  region: 'IN',
                  module: 'Leads',
                  trigger: 'None',
                  addDefaultDuplicateCheck: true,
                  multiSelectFieldLevelDecision: [
                    {
                      from: 'multi-language',
                      to: 'true',
                    },
                    {
                      from: 'multi class',
                      to: 'false',
                    },
                  ],
                },
                Enabled: true,
                WorkspaceID: '',
                Transformations: [],
                RevisionID: 'default-revision',
                IsProcessorEnabled: true,
                IsConnectionEnabled: true,
              },
              batched: false,
              error:
                'failed to fetch zoho id for record for "No contact is found with record details"',
              statTags: {
                errorCategory: 'dataValidation',
                destinationId: 'default-destination',
                workspaceId: 'default-workspace',
                errorType: 'configuration',
                destType: 'ZOHO',
                module: 'destination',
                implementation: 'cdkV2',
                feature: 'router',
              },
            },
          ],
        },
      },
    },
    mockFns: defaultMockFns,
  },
];
